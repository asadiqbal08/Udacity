(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,n){},195:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(91),c=n.n(r),s=n(20),i=n(21),l=n(22),u=n(24),d=n(23),h=n(25),f=(n(187),n(199)),m=n(57),b="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var p={Accept:"application/json",Authorization:k},v=function(e){return fetch("".concat(b,"/books/").concat(e),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.book})},g=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},E=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={shelf:"none"},n.componentDidMount=function(){var e=n.props.currentShelf;e&&n.setState(function(){return{shelf:e}})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.currentBook,o=t.onShelfChange,r=this.state.shelf;return a.a.createElement("div",{className:"book-shelf-changer"},a.a.createElement("select",{onChange:function(t){return a=n,r=t.target.value,e.setState({shelf:r}),void o(a,r);var a,r},value:r},a.a.createElement("option",{value:"move",disabled:!0},"Move to..."),a.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),a.a.createElement("option",{value:"wantToRead"},"Want to Read"),a.a.createElement("option",{value:"read"},"Read"),a.a.createElement("option",{value:"none"},"None")))}}]),t}(o.Component),y=function(e){var t=e.book,n=e.onBookShelfUpdate,o=e.onLoading;return a.a.createElement("li",null,a.a.createElement("div",{className:"book"},a.a.createElement("div",{className:"book-top"},a.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:void 0!==t.imageLinks?"url("+t.imageLinks.thumbnail+")":'url("http://books.google.com/books/content?id=nggnmAEACAAJ&printsec=frontcover&img=1&zoom=1&source=gbs_api")'}}),a.a.createElement(E,{onShelfChange:function(e,t){var a,r;o&&o(!0),(a=e,r=t,fetch("".concat(b,"/books/").concat(a.id),{method:"PUT",headers:Object(m.a)({},p,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:r})}).then(function(e){return e.json()})).then(function(t){n&&n(e)})},currentBook:t,currentShelf:t.shelf})),a.a.createElement("div",{className:"book-title"},t.title),t.authors&&a.a.createElement("div",{className:"book-authors"},t.authors.map(function(e){return e}))))},j=n(39),S=n.n(j),O=n(14);function N(){var e=Object(s.a)(["\n        display: block;\n        margin: 0 auto;\n        border-color: green;\n        "]);return N=function(){return e},e}var C=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={searched_books:[]},n.override=Object(O.css)(N()),n.onChange=function(e){g(e).then(function(e){if(e&&!e.error){var t=n.props.shelf_books;e.map(function(n,o){return t.map(function(n,a){return e[o].id===t[a].id&&(e[o].shelf=t[a].shelf),e[o]})})}n.setState(function(){return{searched_books:e&&!e.error?e:e.items}})})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.searched_books,n=this.props,o=n.onBookShelfUpdate,r=n.loading,c=n.onLoading;return a.a.createElement("div",{className:"search-books"},a.a.createElement("div",{className:"search-books-bar"},a.a.createElement(f.a,{to:"/",className:"close-search"},"Close"),a.a.createElement("div",{className:"search-books-input-wrapper"},a.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){return e.onChange(t.target.value)}}))),a.a.createElement("div",{className:"search-books-results"},a.a.createElement(S.a,{size:50,css:this.override,color:"#123abc",loading:r}),a.a.createElement("ol",{className:"books-grid"},t.map(function(e){return a.a.createElement(y,{key:e.id,book:e,onBookShelfUpdate:o,onLoading:c})}))))}}]),t}(o.Component),w=function(e){return a.a.createElement("div",{className:"open-search"},a.a.createElement(f.a,{to:"/search"},"Add a book"))};function L(){var e=Object(s.a)(["\n        display: block;\n        margin: 0 auto;\n        border-color: green;\n        "]);return L=function(){return e},e}var B=function(e){var t=Object(O.css)(L()),n=e.books,o=e.loading,r=e.onLoading,c=e.onBookShelfUpdate,s=function(e){return[{name:"Currently Reading",books:e.filter(function(e){return"currentlyreading"===e.shelf.toLowerCase()})},{name:"Wants To Read",books:e.filter(function(e){return"wanttoread"===e.shelf.toLowerCase()})},{name:"Read",books:e.filter(function(e){return"read"===e.shelf.toLowerCase()})}]}(n);return a.a.createElement("div",{className:"list-books"},a.a.createElement("div",{className:"list-books-title"},a.a.createElement("h1",null,"MyReads")),a.a.createElement("div",{className:"list-books-content"},a.a.createElement("div",{className:"bookshelf"},s.map(function(e,n){return a.a.createElement("div",{key:n},a.a.createElement("h2",{className:"bookshelf-title"},e.name),a.a.createElement("div",{className:"bookshelf-books"},a.a.createElement(S.a,{size:50,css:t,color:"#123abc",loading:o}),a.a.createElement("ol",{className:"books-grid"},e.books.map(function(e){return a.a.createElement(y,{key:e.id,book:e,onBookShelfUpdate:c,onLoading:r})}))))}))),a.a.createElement(w,null))},_=n(200);function A(){var e=Object(s.a)(["\n    display: block;\n    margin: 0 auto;\n    border-color: green;\n    "]);return A=function(){return e},e}var R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).state={shelf_books:[],loading:!0},n.override=Object(O.css)(A()),n.updateBooksCollection=function(e){v(e.id).then(function(e){n.setState(function(t){return{shelf_books:t.shelf_books.filter(function(t){return t.id!==e.id}).concat(e),loading:!1}})})},n.setLoadingState=function(e){n.setState({loading:e})},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/books"),{headers:p}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState(function(){return{shelf_books:t,loading:!1}})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.shelf_books,o=t.loading;return a.a.createElement("div",{className:"app"},a.a.createElement(_.a,{path:"/search",render:function(){return a.a.createElement(C,{shelf_books:n,onBookShelfUpdate:e.updateBooksCollection,loading:o,onLoading:e.setLoadingState})}}),a.a.createElement(_.a,{exact:!0,path:"/",render:function(){return a.a.createElement(B,{books:n,loading:o,onLoading:e.setLoadingState,onBookShelfUpdate:e.updateBooksCollection})}}))}}]),t}(a.a.Component);n(195);c.a.render(a.a.createElement(R,null),document.getElementById("root"))},94:function(e,t,n){e.exports=n(197)}},[[94,2,1]]]);
//# sourceMappingURL=main.8a50ead2.chunk.js.map